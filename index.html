<!DOCTYPE html>
<html>
<head>
    <title>К07-222</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
<!-- 

Sonic Template 

http://www.templatemo.com/tm-394-sonic 

-->

	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1">

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/MarkerCluster.css">
	<link rel="stylesheet" href="css/MarkerCluster.Default.css">


	<link rel="stylesheet" href="css/mine-style.css">
	<link rel="stylesheet" href="css/templatemo_misc.css">
	<link rel="stylesheet" href="css/templatemo_style.css">
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
	<link rel="stylesheet" href="js/leaflet-routing-machine.css" />



	<script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
	<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
	<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.js"></script>
	<script src="js/leaflet-routing-machine.js"></script>

</head>
<body>
	


	<div id="content">
		<div id="right_block">
			<div id="map"></div>
		</div>
		<div id="left_block" >
			<!--<img src="images/Hh4w4njJx-c.jpg" width="50%"><br>-->
			<div class="logo">
				<a href="#"><h1><img src="images/Hh4w4njJx-c.jpg" width="50%"><br></h1></a>
				<span>Creative your own alco-rout</span>
			</div>
			<div class="navigation" style="margin-top: 30%;">
				<button class="button" id="Nekit_button" value="bar">
					Бары
				</button>
				<button class="button" id="Vlad_button" value="cafe">
					Кафе
				</button>
				<button class="button" id="Dima_button" value="cookery">
					Кулинария
				</button>
				<button class="button" id="Ksusha_button" value="eatery">
					Закусочные
				</button>
				<button class="button" id="Sonya_button" style="display: none;">
					Удалить элементы
				</button>
			</div>
		</div>
		<div style="clear:left;"></div>

	</div>



	<!-- JavaScripts -->

	<script src="js/jquery-1.10.2.min.js"></script>
	<script src="js/jquery.singlePageNav.js"></script>
	<script src="js/jquery.flexslider.js"></script>
	<script src="js/jquery.prettyPhoto.js"></script>
	<script src="js/custom.js"></script>
	<script src="js/dbconnect.js"></script>
	<script src="js/about_us.js"></script>

	<script src="http://maps.kosmosnimki.ru/api/api.js"></script>
	<script src="//rawgit.com/domoritz/leaflet-locatecontrol/gh-pages/dist/L.Control.Locate.min.js" ></script>
	<script src="js/leaflet.markercluster.js" ></script>
	<script src="js/leaflet.markercluster-src.js" ></script>
	<!--<link rel="stylesheet" href="dist/easyPrint.css"/>-->

	<script>


		markers = new L.MarkerClusterGroup({
			iconCreateFunction: function(cluster) {
				var childs = cluster.getAllChildMarkers();
				var childs_clusters_sum = childs
						.map(function(marker) {
							return marker.model.cluster_type;
						})
						.reduce(function(a,b) {
							return a + b;
						});

				return get_cluster_icon(Math.floor(childs_clusters_sum/childs.length), childs.length);
			}
		});
		var map = L.map('map').setView([55.75, 37.61], 11);
		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
			attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(map);


		//поправь тут через ссылку на область определения карты
		function markerDrag(e){
			alert("You dragged to: " + e.latlng);
		}



		var point_pack = [];



		/*map.on('click', function(e){

			var marker = new L.Marker(e.latlng, {draggable:false});
			marker.bindPopup("<strong>"+e.latlng+"</strong>").addTo(map);
			console.log(e.latlng.lat, e.latlng.lng);
			point_pack.push([e.latlng.lat, e.latlng.lng]);
			if(point_pack.length >= 2) {
//				var polyline_options = {
//				color: '#000'
//			};
//
//			var polyline = L.polyline(point_pack, polyline_options).addTo(map);
			}else{

			}

		});*/


		function pidor(){
//			console.log([lat, lng]);
			$.getScript("js/leaflet-routing-machine.js", function(){
				L.Routing.control({
					waypoints: [
						L.latLng(57.74, 11.94),
						L.latLng(55.75, 9.95)
						//L.latLng(lat_from, lng_from)
					]
				}).addTo(map);
			});
		}


		L.control.locate({
			position: 'topleft',
			layer: new L.LayerGroup(),
			drawCircle: true,
			follow: true,
			setView: true,
			keepCurrentZoomLevel: true,
			stopFollowingOnDrag: false,
			remainActive: false,
			markerClass: L.circleMarker,
			circleStyle: {
				opacity: 0.2
			},
			markerStyle: {},
			followCircleStyle: {
				opacity: 0.5
			},
			followMarkerStyle: {},
			icon: 'fa fa-bolt',
			iconLoading: 'fa fa-spinner fa-spin',
			circlePadding: [0, 0],
			metric: true,
			onLocationError: function(err) {alert(err.message)},
			onLocationOutsideMapBounds:  function(context) {
				alert(context.options.strings.outsideMapBoundsMsg);
			},
			showPopup: true,
			strings: {
				title: "Show me where I am",
				metersUnit: "meters",
				feetUnit: "feet",
				popup: "You are within {distance} {unit} from this point",
				outsideMapBoundsMsg: "You seem located outside the boundaries of the map"
			},
			locateOptions: {}
		}).addTo(map);

	</script>

</body>
</html>